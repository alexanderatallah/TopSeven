<div id="welcomeHelper" class="alert alert-info alert-dismissable">
  <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
  Welcome to <strong>Seven</strong>! Here's the news you've missed in the past 7 days. Tap an article to view it.
</div>

<div id="swipeHelper" class="alert alert-warning alert-dismissable" style="display:none">
  <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
  Lastly, you can swipe articles <strong>left to delete</strong>. Seven will learn which articles are best for you. <strong>Go find your Seven.</strong>
</div>

<div class="col-sm-4 article-list" id="articleList">
  <div class="list-group">
  </div>
</div>

<script type="text/javascript">
  $(document).ready(function() {
    // GOOGLE ANALYTICS
    // ga("send", "event", "index", "view");
    // END GOOGLE ANALYTICS

    initArticles();
    articleClick();

    checkHelper("welcomeHelper");
    if(!$("#welcomeHelper").is(":visible") && !JSON.parse(localStorage.helpers).swipeHelper) {
      $("#swipeHelper").show();
      checkHelper("swipeHelper");
    }
    
    enableSwiping();

    {{#if fancy}}
      $(window).on('scroll', scrollAnimation);
      scrollAnimation();
    {{/if}}

    // $(window).on('scroll', function(e) {
      // GOOGLE ANALYTICS
      // ga("send", "event", "index", "scroll");
      // END GOOGLE ANALYTICS
    // });
  });

  function scrollAnimation(_e) {
    {{#if fancy}}
      var edge = $(window).scrollTop();

      $(".article-list .list-group-item").each(function(i) {
        var thisEdge = $(this).offset().top;
        if (thisEdge <= edge) return;
        var zoomFactor = 14.0/Math.sqrt(thisEdge - edge);
        if (zoomFactor > 1) zoomFactor = 1;
        // console.log(zoomFactor);
        var translateFactor = 16 - Math.pow(16, 1.0/zoomFactor);
        // var translateFactor = -9.48665*Math.pow(zoomFactor, 2.12531);
        // console.log(translateFactor);

        move(this)
          .scale(zoomFactor)
          .y(translateFactor)
          .duration('0.5s')
          .end();
      });
    {{/if}}
  }

  function scrollAnimationOld(_e) {
    {{#if fancy}}
      var edge = $(window).scrollTop();

      $(".article-list .list-group-item").each(function(i) {
        var thisEdge = $(this).offset().top;
        if (thisEdge <= edge) return;
        var zoomFactor = 14.0/Math.sqrt(thisEdge - edge);
        if (zoomFactor > 1) zoomFactor = 1;
        // console.log(zoomFactor);
        var translateFactor = 16 - Math.pow(16, 1.0/zoomFactor);
        // var translateFactor = -9.48665*Math.pow(zoomFactor, 2.12531);
        // console.log(translateFactor);
        $(this).css({
          "-webkit-transform": "scale(" + zoomFactor + ") " +
                               "translateY(" + translateFactor + "px)"
        });
      });
    {{/if}}
  }
</script>